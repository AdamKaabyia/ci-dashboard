version: v1
description: GPU Operator Test Matrix
test_history: 15
matrices:
  nightlies:
    description: Red Hat OpenShift Nightlies
    operator_name: GPU Operator

    viewer_url: https://prow.ci.openshift.org/view/gs/origin-ci-test/logs

    artifacts_url: https://gcsweb-ci.apps.ci.l2s4.p1.openshiftapps.com/gcs/origin-ci-test/logs
    artifacts_cache: cache

    prow_config: periodic-ci-openshift-psap-ci-artifacts
    prow_step: nightly

    tests:
      95_480|OpenShift 4.9:
      - branch: release-4.9
        test_name: gpu-operator-e2e-master
        operator_version: master
        expected_failures: 4

      96_480|OpenShift 4.8:
      - branch: release-4.8
        test_name: gpu-operator-e2e-master
        operator_version: master
        expected_failures: 4

      - branch: release-4.8
        test_name: gpu-operator-e2e-18x
        operator_version: 1.8
        expected_failures: 3

      - branch: release-4.8
        test_name: gpu-operator-e2e-17x
        operator_version: 1.7
        expected_failures: 3

      97_470|OpenShift 4.7:
      - branch: release-4.7
        test_name: gpu-operator-e2e-master
        operator_version: master
        expected_failures: 3

      - branch: release-4.7
        test_name: gpu-operator-e2e-18x
        operator_version: 1.8
        expected_failures: 3

      - branch: release-4.7
        test_name: gpu-operator-e2e-170
        operator_version: 1.7
        expected_failures: 3

      - branch: release-4.7
        test_name: gpu-operator-e2e-162
        operator_version: 1.6
        expected_failures: 3

      98_475|OpenShift 4.6 upgraded to 4.7:
      - branch: release-4.7
        test_name: gpu-operator-e2e-upgrade
        operator_version: master
        variant: upgrade
        prow_step: 2-postupgrade-gpu-operator-validate-deployment
        expected_failures: 0

      - branch: release-4.7
        test_name: gpu-operator-e2e-upgrade-170
        operator_version: 1.7
        variant: upgrade
        prow_step: 2-postupgrade-gpu-operator-validate-deployment
        expected_failures: 0

      99_460|OpenShift 4.6:
      - branch: release-4.6
        test_name: gpu-operator-e2e-170
        operator_version: 1.7
        expected_failures: 3

      - branch: release-4.6
        test_name: gpu-operator-e2e-162
        operator_version: 1.6
        expected_failures: 3

      - branch: release-4.6
        test_name: gpu-operator-e2e-152
        operator_version: 1.5
        expected_failures: 3

      - branch: release-4.6
        test_name: gpu-operator-e2e-140
        operator_version: 1.4
        expected_failures: 3
